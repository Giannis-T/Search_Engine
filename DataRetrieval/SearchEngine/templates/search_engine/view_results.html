{% extends "search_engine/layout.html" %}

{% block body %}
    <h2>Results</h2>
    {% if search_type != "advanced_search"%}
      <form name="groupBy-form" action="{% url 'group_by_len' %}" method="post" >
        {% csrf_token %}
        <input type="hidden" name="q" value = {{query}}>
        <input type="hidden" name="field" value = {{field}}>
        <input class="groupBy" type="submit" value="Group By Lyrics Length"> 
      </form>
    {% endif %}
        
    Current Page: <b>{{current_page}}</b>
    <br>
    <div style="display: flex;">
      <form name="prev_ten_form" action="{% url 'prev_ten' %}" method="post" style="margin:10px">
        {% csrf_token %}
        <input type="hidden" name="q" value = {{query}}>
        <input type="hidden" name="field" value= {{field}}>
        <input type="hidden" name="search_type" value= {{search_type}}>
        <div class="previous round">
            <input class="previous round" type="submit" value="&#8249;"> 
        </div>
      </form>
      
      <form name="next_ten_form" action="{% url 'next_ten' %}" method="post" style="margin:10px" >
        {% csrf_token %}
        <input type="hidden" name="q" value = {{query}}>
        <input type="hidden" name="field" value= {{field}}>
        <input type="hidden" name="search_type" value= {{search_type}}>
        <div class="next round">
            <input class="next round" type="submit" value="&#8250;"> 
        </div>
      </form>
    </div>

    <table class="table  table-bordered table-striped" style="margin-left:10px; margin-right:10px;">
        <thead class="thead-dark">
          <tr>
            <th>Rank</th>
            <th>Artist</th>
            <th>Title</th>
            <th>Lyrics</th>
          </tr>
        </thead>
        <tbody>
        <!-- jinja2 Technique -->
        {% if results %}  
            {% for i in results %}
            <tr>
                <td class="text-nowrap">{{i.rank}}</td>
                <td class="text-nowrap">{{i.artist | safe}}</td>
                <td class="text-nowrap">{{i.title | safe}}</td>
                <td>{{i.lyrics | safe}}</td>
            </tr>
            {% endfor %}
        {% endif %}
        </tbody>
      </table>
    </div>
{% endblock %}